/*! ODataResources 2015-06-09 */
angular.module("ODataResources",["ng"]),angular.module("ODataResources").factory("$odataOperators",[function(){var a=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;trim=function(b){return b.replace(a,"")};var b={eq:["=","==","==="],ne:["!=","!==","<>"],gt:[">"],ge:[">=",">=="],lt:["<"],le:["<=","<=="],and:["&&"],or:["||"],not:["!"],add:["+"],sub:["-"],mul:["*"],div:["/"],mod:["%"]},c=function(a){var c,d=trim(a).toLowerCase();for(c in b){if(d===c)return c;for(var e=b[c],f=0;f<e.length;f++)if(d===e[f])return c}throw"Operator "+a+" not found"};return{operators:b,convert:c}}]),angular.module("ODataResources").factory("$odataValue",[function(){var a={"%":"%25","+":"%2B","/":"%2F","?":"%3F","#":"%23","&":"%26"},b=function(b){for(var c in a)b=b.replace(c,a[c]);return b=b.replace("'","''")},c=function(a,b){this.value=a,this.type=b},d=function(a){return"datetime'"+a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2)+"T"+("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2)+":"+("0"+a.getSeconds()).slice(-2)+"'"};return c.prototype.executeWithUndefinedType=function(){if(angular.isString(this.value))return"'"+b(this.value)+"'";if(this.value===!1)return"false";if(this.value===!0)return"true";if(angular.isDate(this.value))return d(this.value);if(isNaN(this.value))throw"Unrecognized type of "+this.value;return this.value},c.prototype.executeWithType=function(){if(this.value===!0||this.value===!1){if("boolean"===this.type.toLowerCase())return!!this.value+"";if("string"===this.type.toLowerCase())return"'"+!!this.value+"'";throw"Cannot convert bool ("+this.value+") into "+this.type}if(angular.isDate(this.value)){if("decimal"===this.type.toLowerCase())return this.value.getTime()+"M";if("int32"===this.type.toLowerCase())return this.value.getTime()+"";if("single"===this.type.toLowerCase())return this.value.getTime()+"f";if("double"===this.type.toLowerCase())return this.value.getTime()+"d";if("datetime"===this.type.toLowerCase())return d(this.value);if("string"===this.type.toLowerCase())return"'"+this.value.toISOString()+"'";throw"Cannot convert date ("+this.value+") into "+this.type}if(angular.isString(this.value)){if("guid"===this.type.toLowerCase())return"guid'"+this.value+"'";if("datetime"===this.type.toLowerCase())return d(new Date(this.value));if("single"===this.type.toLowerCase())return parseFloat(this.value)+"f";if("double"===this.type.toLowerCase())return parseFloat(this.value)+"d";if("decimal"===this.type.toLowerCase())return parseFloat(this.value)+"M";if("boolean"===this.type.toLowerCase())return this.value;if("int32"===this.type.toLowerCase())return parseInt(this.value)+"";throw"Cannot convert "+this.value+" into "+this.type}if(isNaN(this.value))throw"Source type of "+this.value+" to be conververted into "+this.type+"is not supported";if("boolean"===this.type.toLowerCase())return!!this.value+"";if("decimal"===this.type.toLowerCase())return this.value+"M";if("double"===this.type.toLowerCase())return this.value+"d";if("single"===this.type.toLowerCase())return this.value+"f";if("byte"===this.type.toLowerCase())return(this.value%255).toString(16);if("datetime"===this.type.toLowerCase())return d(new Date(this.value));if("string"===this.type.toLowerCase())return"'"+this.value+"'";throw"Cannot convert number ("+this.value+") into "+this.type},c.prototype.execute=function(){return void 0===this.type?this.executeWithUndefinedType():this.executeWithType()},c}]),angular.module("ODataResources").factory("$odataProperty",[function(){var a=function(a){this.value=a};return a.prototype.execute=function(){return this.value},a}]),angular.module("ODataResources").factory("$odataBinaryOperation",["$odataOperators","$odataProperty","$odataValue",function(a,b,c){var d=function(d,e,f){if(void 0===d)throw"The property of a filter cannot be undefined";if(void 0===e)throw"The value of a filter cannot be undefined";void 0===f?(angular.isFunction(d.execute)?this.operandA=d:this.operandA=new b(d),angular.isFunction(e.execute)?this.operandB=e:this.operandB=new c(e),this.filterOperator="eq"):(angular.isFunction(d.execute)?this.operandA=d:this.operandA=new b(d),angular.isFunction(f.execute)?this.operandB=f:this.operandB=new c(f),this.filterOperator=a.convert(e))};return d.prototype.execute=function(a){var b=this.operandA.execute()+" "+this.filterOperator+" "+this.operandB.execute();return a||(b="("+b+")"),b},d.prototype.or=function(a,b,c){var e;if(void 0!==b)e=new d(a,b,c);else{if(!angular.isFunction(a.execute))throw"The object "+a+" passed as a parameter of the or method is not valid";e=a}return new d(this,"or",e)},d.prototype.and=function(a,b,c){var e;if(void 0!==b)e=new d(a,b,c);else{if(!angular.isFunction(a.execute))throw"The object "+a+" passed as a parameter of the and method is not valid";e=a}return new d(this,"and",e)},d}]),angular.module("ODataResources").factory("$odataMethodCall",["$odataProperty","$odataValue",function(a,b){var c=function(c){if(void 0===c||""===c)throw"Method name should be defined";if(this.params=[],arguments.length<2)throw"Method should be invoked with arguments";for(var d=1;d<arguments.length;d++){var e=arguments[d];this.params.push(angular.isFunction(e.execute)?e:1==d?new a(e):new b(e))}this.methodName=c};return c.prototype.execute=function(){for(var a=this.methodName+"(",b=0;b<this.params.length;b++)b>0&&(a+=","),a+=this.params[b].execute();return a+=")"},c}]),angular.module("ODataResources").factory("$odataOrderByStatement",[function(a,b,c){var d=function(a,b){if(void 0===a)throw"Orderby should be passed a property name but got undefined";this.propertyName=a,this.direction=b||"asc"};return d.prototype.execute=function(){return this.propertyName+" "+this.direction},d}]),angular.module("ODataResources").factory("$odataPredicate",["$odataBinaryOperation",function(a){var b=function(b,c,d){return angular.isFunction(b.execute)&&void 0===c?b:new a(b,c,d)};return b.and=function(b){if(b.length>0){for(var c=b[0],d=1;d<b.length;d++)c=new a(c,"and",b[d]);return c}throw"No statements specified"},b.or=function(b){if(b.length>0){for(var c=b[0],d=1;d<b.length;d++)c=new a(c,"or",b[d]);return c}throw"No statements specified for OR predicate"},b.create=function(b,c,d){return angular.isFunction(b.execute)&&void 0===c?b:new a(b,c,d)},b}]),angular.module("ODataResources").factory("$odataProvider",["$odataOperators","$odataBinaryOperation","$odataPredicate","$odataOrderByStatement",function(a,b,c,d){var e=function(a){this.callback=a,this.filters=[],this.sortOrders=[],this.takeAmount=void 0,this.skipAmount=void 0,this.expandables=[]};return e.prototype.filter=function(a,c,d){if(void 0===a)throw"The first parameted is undefined. Did you forget to invoke the method as a constructor by adding the 'new' keyword?";var e;return e=angular.isFunction(a.execute)&&void 0===c?a:new b(a,c,d),this.filters.push(e),this},e.prototype.orderBy=function(a,b){return this.sortOrders.push(new d(a,b)),this},e.prototype.take=function(a){return this.takeAmount=a,this},e.prototype.skip=function(a){return this.skipAmount=a,this},e.prototype.execute=function(){var a,b="";if(this.filters.length>0&&(b="$filter="+c.and(this.filters).execute(!0)),this.sortOrders.length>0)for(""!==b&&(b+="&"),b+="$orderby=",a=0;a<this.sortOrders.length;a++)a>0&&(b+=","),b+=this.sortOrders[a].execute();if(this.takeAmount&&(""!==b&&(b+="&"),b+="$top="+this.takeAmount),this.skipAmount&&(""!==b&&(b+="&"),b+="$skip="+this.skipAmount),this.expandables.length>0)for(""!==b&&(b+="&"),b+="$expand=",a=0;a<this.expandables.length;a++)a>0&&(b+=","),b+=this.expandables[a];return b},e.prototype.query=function(a,b){if(!angular.isFunction(this.callback))throw"Cannot execute query, no callback was specified";return a=a||angular.noop,b=b||angular.noop,this.callback(this.execute(),a,b)},e.prototype.single=function(a,b,c){if(!angular.isFunction(this.callback))throw"Cannot execute get, no callback was specified";return b=b||angular.noop,c=c||angular.noop,this.callback(this.execute(),b,c,!0,!0)},e.prototype.get=function(a,b,c){if(!angular.isFunction(this.callback))throw"Cannot execute get, no callback was specified";return b=b||angular.noop,c=c||angular.noop,this.callback("("+a+")",b,c,!0)},e.prototype.expand=function(a){if(!angular.isString(a)&&!angular.isArray(a))throw"Invalid parameter passed to expand method ("+a+")";if(""!==a){var b=a;b=angular.isArray(a)?a.join("/"):Array.prototype.slice.call(arguments).join("/");for(var c=0;c<this.expandables.length;c++)if(this.expandables[c]===b)return this;return this.expandables.push(b),this}},e}]),function(a,b,c){"use strict";function d(a){return null!==a&&""!==a&&"hasOwnProperty"!==a&&h.test("."+a)}function e(a,b){if(!d(b))throw g("badmember",'Dotted member path "@{0}" is invalid.',b);for(var e=b.split("."),f=0,h=e.length;h>f&&a!==c;f++){var i=e[f];a=null!==a?a[i]:c}return a}function f(a,c){c=c||{},b.forEach(c,function(a,b){delete c[b]});for(var d in a)!a.hasOwnProperty(d)||"$"===d.charAt(0)&&"$"===d.charAt(1)||(c[d]=a[d]);return c}var g=b.$$minErr("$resource"),h=/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;b.module("ODataResources").provider("$odataresource",function(){var a=this;this.defaults={stripTrailingSlashes:!0,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"},update:{method:"PUT"},odata:{method:"GET",isArray:!0}}},this.$get=["$http","$q","$odata",function(d,h,i){function j(a){return k(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function k(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,b?"%20":"+")}function l(b,c){this.template=b,this.defaults=p({},a.defaults,c),this.urlParams={}}function m(j,k,s,t){function u(a,b){var c={};return b=p({},k,b),o(b,function(b,d){r(b)&&(b=b()),c[d]=b&&b.charAt&&"@"==b.charAt(0)?e(a,b.substr(1)):b}),c}function v(a){return a.resource}function w(a){f(a||{},this)}t=t||{},b.isString(k)&&(t.odatakey=k,k={});var x=new l(j,t);s=p({},a.defaults.actions,s),w.prototype.toJSON=function(){var a=p({},this);return delete a.$promise,delete a.$resolved,a},o(s,function(a,e){var i=/^(POST|PUT|PATCH)$/i.test(a.method);w[e]=function(j,k,l,m,s,t,y,z){var A,B,C,D={};switch(arguments.length){case 8:case 7:case 6:case 4:C=m,B=l;case 3:case 2:if(!r(k)){D=j,A=k,B=l;break}if(r(j)){B=j,C=k;break}B=k,C=l;case 1:r(j)?B=j:i?A=j:D=j;break;case 0:break;default:throw g("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var E=this instanceof w,F=E?A:!y&&a.isArray?[]:new w(A),G={},H=a.interceptor&&a.interceptor.response||v,I=a.interceptor&&a.interceptor.responseError||c;o(a,function(a,b){"params"!=b&&"isArray"!=b&&"interceptor"!=b&&(G[b]=q(a))}),i&&(G.data=A),x.setUrlParams(G,p({},u(A,a.params||{}),D),a.url,A,s),!s||""===t||y&&!z?s&&""!==t&&y&&(G.url+=t):G.url+="?"+t;var J=d(G).then(function(c){var d=c.data,h=F.$promise;if(d&&b.isString(d["@odata.context"])&&d.value){var i=d;d=d.value;for(var j in i)"value"!==j&&(F[j]=i[j])}if(d){if(b.isArray(d)!==(!y&&!!a.isArray)&&!z)throw g("badcfg","Error in resource configuration for action `{0}`. Expected response to contain an {1} but got an {2} (Request: {3} {4})",e,!y&&a.isArray?"array":"object",b.isArray(d)?"array":"object",G.method,G.url);if(b.isArray(d)&&z){if(!(d.length>0))throw"The response returned no result";d=d[0]}!y&&a.isArray?(F.length=0,o(d,function(a){F.push("object"==typeof a?new w(a):a)})):(f(d,F),F.$promise=h)}return F.$resolved=!0,c.resource=F,c},function(a){return F.$resolved=!0,(C||n)(a),h.reject(a)});return J=J.then(function(a){var b=H(a);return(B||n)(b,a.headers),b},I),E?J:(F.$promise=J,F.$resolved=!1,F)},w.prototype["$"+e]=function(a,b,c){r(a)&&(c=b,b=a,a={});var d=w[e].call(this,a,this,b,c);return d.$promise||d}});var y=w.odata;return w.odata=function(){var a=function(a,b,c,d,e){return y({},{},b,c,!0,a,d,e)};return new i.Provider(a)},w.bind=function(a){return m(j,p({},k,a),s)},w}var n=b.noop,o=b.forEach,p=b.extend,q=b.copy,r=b.isFunction;return l.prototype={setUrlParams:function(a,c,d,e,f){var h,i,k=this,l=d||k.template;l===k.template&&("PUT"===a.method||"GET"==a.method&&!f||"PATCH"==a.method)&&b.isString(k.defaults.odatakey)&&(k.defaults.stripTrailingSlashes&&(l=l.replace(/\/+$/,"")||"/"),l=l+"(:"+k.defaults.odatakey+")",e&&(c[k.defaults.odatakey]=e[k.defaults.odatakey]));var m=k.urlParams={};o(l.split(/\W/),function(a){if("hasOwnProperty"===a)throw g("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(a)&&a&&new RegExp("(^|[^\\\\]):"+a+"(\\W|$)").test(l)&&(m[a]=!0)}),l=l.replace(/\\:/g,":"),c=c||{},o(k.urlParams,function(a,d){h=c.hasOwnProperty(d)?c[d]:k.defaults[d],b.isDefined(h)&&null!==h?(i=j(h),l=l.replace(new RegExp(":"+d+"(\\W|$)","g"),function(a,b){return i+b})):l=l.replace(new RegExp("(/?):"+d+"(\\W|$)","g"),function(a,b,c){return"/"==c.charAt(0)?c:b+c})}),k.defaults.stripTrailingSlashes&&(l=l.replace(/\/+$/,"")||"/"),l=l.replace(/\/\.(?=\w+($|\?))/,"."),a.url=l.replace(/\/\\\./,"/."),o(c,function(b,c){k.urlParams[c]||(a.params=a.params||{},a.params[c]=b)})}},m}]})}(window,window.angular),angular.module("ODataResources").factory("$odata",["$odataBinaryOperation","$odataProvider","$odataValue","$odataProperty","$odataMethodCall","$odataPredicate","$odataOrderByStatement",function(a,b,c,d,e,f,g){return{Provider:b,BinaryOperation:a,Value:c,Property:d,Func:e,Predicate:f,OrderBy:g}}]);