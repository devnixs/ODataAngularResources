/*! ODataResources 2016-03-31 */
angular.module("ODataResources",["ng"]),angular.module("ODataResources").factory("$odataOperators",[function(){var a=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,b=function(b){return b.replace(a,"")},c={eq:["=","==","==="],ne:["!=","!==","<>"],gt:[">"],ge:[">=",">=="],lt:["<"],le:["<=","<=="],and:["&&"],or:["||"],not:["!"],add:["+"],sub:["-"],mul:["*"],div:["/"],mod:["%"]},d=function(a){var d,e=b(a).toLowerCase();for(d in c){if(e===d)return d;for(var f=c[d],g=0;g<f.length;g++)if(e===f[g])return d}throw"Operator "+a+" not found"};return{operators:c,convert:d}}]),angular.module("ODataResources").factory("$odataValue",[function(){var a={"%":"%25","+":"%2B","/":"%2F","?":"%3F","#":"%23","&":"%26"},b=function(b){for(var c in a)b=b.replace(c,a[c]);return b=b.replace(/'/g,"''")},c=function(a,b){this.value=a,this.type=b},d=function(a,b){return b?a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2)+"T"+("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2)+":"+("0"+a.getSeconds()).slice(-2)+"Z":"datetime'"+a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2)+"T"+("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2)+":"+("0"+a.getSeconds()).slice(-2)+"'"},e=function(a,b){return b?a:"guid'"+a+"'"},f=function(a,b){return b?a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2)+"T"+("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2)+":"+("0"+a.getSeconds()).slice(-2)+"Z":"datetimeoffset'"+a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2)+"T"+("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2)+":"+("0"+a.getSeconds()).slice(-2)+"'"};return c.prototype.executeWithUndefinedType=function(a){if(angular.isString(this.value))return"'"+b(this.value)+"'";if(this.value===!1)return"false";if(this.value===!0)return"true";if(angular.isDate(this.value))return d(this.value,a);if(isNaN(this.value))throw"Unrecognized type of "+this.value;return this.value},c.prototype.executeWithType=function(a){if(this.value===!0||this.value===!1){if("boolean"===this.type.toLowerCase())return!!this.value+"";if("string"===this.type.toLowerCase())return"'"+!!this.value+"'";throw"Cannot convert bool ("+this.value+") into "+this.type}if(angular.isDate(this.value)){if("decimal"===this.type.toLowerCase())return this.value.getTime()+"M";if("int32"===this.type.toLowerCase())return this.value.getTime()+"";if("single"===this.type.toLowerCase())return this.value.getTime()+"f";if("double"===this.type.toLowerCase())return this.value.getTime()+"d";if("datetime"===this.type.toLowerCase())return d(this.value,a);if("datetimeoffset"===this.type.toLowerCase())return f(new Date(this.value),a);if("string"===this.type.toLowerCase())return"'"+this.value.toISOString()+"'";throw"Cannot convert date ("+this.value+") into "+this.type}if(angular.isString(this.value)){if("guid"===this.type.toLowerCase())return e(this.value,a);if("datetime"===this.type.toLowerCase())return d(new Date(this.value),a);if("datetimeoffset"===this.type.toLowerCase())return f(new Date(this.value),a);if("single"===this.type.toLowerCase())return parseFloat(this.value)+"f";if("double"===this.type.toLowerCase())return parseFloat(this.value)+"d";if("decimal"===this.type.toLowerCase())return parseFloat(this.value)+"M";if("boolean"===this.type.toLowerCase())return this.value;if("int32"===this.type.toLowerCase())return parseInt(this.value)+"";throw"Cannot convert "+this.value+" into "+this.type}if(isNaN(this.value))throw"Source type of "+this.value+" to be conververted into "+this.type+"is not supported";if("boolean"===this.type.toLowerCase())return!!this.value+"";if("decimal"===this.type.toLowerCase())return this.value+"M";if("double"===this.type.toLowerCase())return this.value+"d";if("single"===this.type.toLowerCase())return this.value+"f";if("byte"===this.type.toLowerCase())return(this.value%255).toString(16);if("datetime"===this.type.toLowerCase())return d(new Date(this.value),a);if("string"===this.type.toLowerCase())return"'"+this.value+"'";throw"Cannot convert number ("+this.value+") into "+this.type},c.prototype.execute=function(a){return null===this.value?"null":void 0===this.type?this.executeWithUndefinedType(a):this.executeWithType(a)},c}]),angular.module("ODataResources").factory("$odataProperty",[function(){var a=function(a){this.value=a};return a.prototype.execute=function(){return this.value},a}]),angular.module("ODataResources").factory("$odataBinaryOperation",["$odataOperators","$odataProperty","$odataValue",function(a,b,c){var d=function(d,e,f){if(void 0===d)throw"The property of a filter cannot be undefined";if(void 0===e)throw"The value of a filter cannot be undefined";void 0===f?(angular.isFunction(d.execute)?this.operandA=d:this.operandA=new b(d),null!==e&&angular.isFunction(e.execute)?this.operandB=e:this.operandB=new c(e),this.filterOperator="eq"):(angular.isFunction(d.execute)?this.operandA=d:this.operandA=new b(d),null!==f&&angular.isFunction(f.execute)?this.operandB=f:this.operandB=new c(f),this.filterOperator=a.convert(e))};return d.prototype.execute=function(a,b){var c=this.operandA.execute(a)+" "+this.filterOperator+" "+this.operandB.execute(a);return b||(c="("+c+")"),c},d.prototype.or=function(a,b,c){var e;if(void 0!==b)e=new d(a,b,c);else{if(!angular.isFunction(a.execute))throw"The object "+a+" passed as a parameter of the or method is not valid";e=a}return new d(this,"or",e)},d.prototype.and=function(a,b,c){var e;if(void 0!==b)e=new d(a,b,c);else{if(!angular.isFunction(a.execute))throw"The object "+a+" passed as a parameter of the and method is not valid";e=a}return new d(this,"and",e)},d}]),angular.module("ODataResources").factory("$odataExpandPredicate",[function(){var a=function(a,b){if(void 0===a)throw"ExpandPredicate should be passed a table name but got undefined.";if(void 0===b)throw"ExpandPredicate should be passed a context but got undefined.";this.name=a,this.expandables=[],this.options={select:[],expand:this.expandables},this.context=b};return a.prototype.select=function(a){function b(b,c){return c===a[b]}if(void 0===a)throw"ExpandPredicate.select should be passed a property name but got undefined.";angular.isArray(a)||(a=a.split(","));for(var c=0;c<a.length;c++)this.options.select.some(b.bind(this,c))||this.options.select.push(a[c]);return this},a.prototype.expand=function(b){if(void 0===b)throw"ExpandPredicate.expand should be passed a table name but got undefined.";return new a(b,this).finish()},a.prototype.expandPredicate=function(b){if(void 0===b)throw"ExpandPredicate.expandPredicate should be passed a table name but got undefined.";return new a(b,this)},a.prototype.build=function(){var a=this.name,b=[];for(var c in this.options)this.options[c].length&&b.push("$"+c+"="+this.options[c].join(","));return b.length&&(a+="("+b.join(";")+")"),a},a.prototype.finish=function(){var a=this.build();return this.context.expandables.push(a),this.context},a}]),angular.module("ODataResources").factory("$odataMethodCall",["$odataProperty","$odataValue",function(a,b){var c=function(c){if(void 0===c||""===c)throw"Method name should be defined";if(this.params=[],arguments.length<2)throw"Method should be invoked with arguments";for(var d=1;d<arguments.length;d++){var e=arguments[d];angular.isFunction(e.execute)?this.params.push(e):1==d?this.params.push(new a(e)):this.params.push(new b(e))}this.methodName=c};return c.prototype.execute=function(){for(var a=this.methodName+"(",b=0;b<this.params.length;b++)b>0&&(a+=","),a+=this.params[b].execute();return a+=")"},c}]),angular.module("ODataResources").factory("$odataOrderByStatement",[function(a,b,c){var d=function(a,b){if(void 0===a)throw"Orderby should be passed a property name but got undefined";this.propertyName=a,this.direction=b||"asc"};return d.prototype.execute=function(){return this.propertyName+" "+this.direction},d}]),angular.module("ODataResources").factory("$odataPredicate",["$odataBinaryOperation",function(a){var b=function(b,c,d){return angular.isFunction(b.execute)&&void 0===c?b:new a(b,c,d)};return b.and=function(b){if(b.length>0){for(var c=b[0],d=1;d<b.length;d++)c=new a(c,"and",b[d]);return c}throw"No statements specified"},b.or=function(b){if(b.length>0){for(var c=b[0],d=1;d<b.length;d++)c=new a(c,"or",b[d]);return c}throw"No statements specified for OR predicate"},b.create=function(b,c,d){return angular.isFunction(b.execute)&&void 0===c?b:new a(b,c,d)},b}]),angular.module("ODataResources").factory("$odataProvider",["$odataOperators","$odataBinaryOperation","$odataPredicate","$odataOrderByStatement","$odataExpandPredicate",function(a,b,c,d,e){var f=function(a,b){this.callback=a,this.filters=[],this.sortOrders=[],this.takeAmount=void 0,this.skipAmount=void 0,this.expandables=[],this.isv4=b,this.hasInlineCount=!1,this.selectables=[],this.transformUrls=[],this.formatBy=void 0};f.prototype.filter=function(a,c,d){if(void 0===a)throw"The first parameted is undefined. Did you forget to invoke the method as a constructor by adding the 'new' keyword?";var e;return e=angular.isFunction(a.execute)&&void 0===c?a:new b(a,c,d),this.filters.push(e),this},f.prototype.transformUrl=function(a){return this.transformUrls.push(a),this},f.prototype.orderBy=function(a,b){return this.sortOrders.push(new d(a,b)),this},f.prototype.take=function(a){return this.takeAmount=a,this},f.prototype.skip=function(a){return this.skipAmount=a,this},f.prototype.format=function(a){return this.formatBy=a,this},f.prototype.execute=function(){var a,b="";if(this.filters.length>0&&(b="$filter="+c.and(this.filters).execute(this.isv4,!0)),this.sortOrders.length>0)for(""!==b&&(b+="&"),b+="$orderby=",a=0;a<this.sortOrders.length;a++)a>0&&(b+=","),b+=this.sortOrders[a].execute();for(this.takeAmount&&(""!==b&&(b+="&"),b+="$top="+this.takeAmount),this.skipAmount&&(""!==b&&(b+="&"),b+="$skip="+this.skipAmount),this.expandables.length>0&&(""!==b&&(b+="&"),b+="$expand="+this.expandables.join(",")),this.selectables.length>0&&(""!==b&&(b+="&"),b+="$select="+this.selectables.join(",")),this.hasInlineCount>0&&(""!==b&&(b+="&"),b+=this.isv4?"$count=true":"$inlinecount=allpages"),this.formatBy&&(""!==b&&(b+="&"),b+="$format="+this.formatBy),a=0;a<this.transformUrls.length;a++){var d=this.transformUrls[a];b=d(b)}return b},f.prototype.query=function(a,b){if(!angular.isFunction(this.callback))throw"Cannot execute query, no callback was specified";return a=a||angular.noop,b=b||angular.noop,this.callback(this.execute(),a,b)},f.prototype.single=function(a,b,c){if(!angular.isFunction(this.callback))throw"Cannot execute get, no callback was specified";return b=b||angular.noop,c=c||angular.noop,this.callback(this.execute(),b,c,!0,!0)},f.prototype.get=function(a,b,c){if(!angular.isFunction(this.callback))throw"Cannot execute count, no callback was specified";b=b||angular.noop,c=c||angular.noop;var d=this.execute();return d.length>0&&(d="?"+d),this.callback("("+a+")"+d,b,c,!0)},f.prototype.count=function(a,b){if(!angular.isFunction(this.callback))throw"Cannot execute get, no callback was specified";a=a||angular.noop,b=b||angular.noop;var c=this.execute();return c.length>0&&(c="/?"+c),this.callback("/$count"+c,a,b,!0)},f.prototype.withInlineCount=function(){return this.hasInlineCount=!0,this};var g=function(a){var b=a.shift(),c=b;return a.length>0&&(c=c+"($expand="+g(a)+")"),c};return f.prototype.expand=function(a){if(!angular.isString(a)&&!angular.isArray(a))throw"Invalid parameter passed to expand method ("+a+")";if(""!==a){var b=a;if(this.isv4)angular.isArray(a)||(a=Array.prototype.slice.call(arguments)),b=g(a);else{b=angular.isArray(a)?a.join("/"):Array.prototype.slice.call(arguments).join("/");for(var c=0;c<this.expandables.length;c++)if(this.expandables[c]===b)return this}return this.expandables.push(b),this}},f.prototype.expandPredicate=function(a){return new e(a,this)},f.prototype.select=function(a){if(!angular.isString(a)&&!angular.isArray(a))throw"Invalid parameter passed to select method ("+a+")";if(""!==a){angular.isArray(a)||(a=Array.prototype.slice.call(arguments));for(var b=a.length-1;b>=0;b--)this.selectables.push(a[b]);return this}},f}]),function(a,b,c){"use strict";function d(a){return null!==a&&""!==a&&"hasOwnProperty"!==a&&h.test("."+a)}function e(a,b){if(!d(b))throw g("badmember",'Dotted member path "@{0}" is invalid.',b);for(var e=b.split("."),f=0,h=e.length;h>f&&a!==c;f++){var i=e[f];a=null!==a?a[i]:c}return a}function f(a,c){c=c||{},b.forEach(c,function(a,b){delete c[b]});for(var d in a)!a.hasOwnProperty(d)||"$"===d.charAt(0)&&"$"===d.charAt(1)||(c[d]=a[d]);return c}var g=b.$$minErr("$resource"),h=/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;b.module("ODataResources").provider("$odataresource",function(){var a=this;this.defaults={stripTrailingSlashes:!0,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"},update:{method:"PUT"},odata:{method:"GET",isArray:!0}}},this.$get=["$http","$q","$odata",function(d,h,i){function j(a){return k(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function k(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,b?"%20":"+")}function l(b,c){this.template=b,this.defaults=p({},a.defaults,c),this.urlParams={}}function m(j,k,s,t){function u(a,b){var c={};return b=p({},k,b),o(b,function(b,d){r(b)&&(b=b()),c[d]=b&&b.charAt&&"@"==b.charAt(0)?e(a,b.substr(1)):b}),c}function v(a){return a.resource}function w(a){f(a||{},this)}t=t||{},b.isString(k)&&(t.odatakey=k,k={});var x=new l(j,t);s=p({},a.defaults.actions,s),w.prototype.toJSON=function(){var a=p({},this);return delete a.$promise,delete a.$resolved,a},o(s,function(a,e){var i=/^(POST|PUT|PATCH)$/i.test(a.method);w[e]=function(j,k,l,m,s,y,z,A){var B,C,D,E={};switch(arguments.length){case 8:case 7:case 6:case 4:D=m,C=l;case 3:case 2:if(!r(k)){E=j,B=k,C=l;break}if(r(j)){C=j,D=k;break}C=k,D=l;case 1:r(j)?C=j:i?B=j:E=j;break;case 0:break;default:throw g("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var F=this instanceof w,G=F?B:!z&&a.isArray?[]:new w(B),H={},I=a.interceptor&&a.interceptor.response||v,J=a.interceptor&&a.interceptor.responseError||c;o(a,function(a,b){"params"!=b&&"isArray"!=b&&"interceptor"!=b&&(H[b]=q(a))}),i&&(H.data=B),x.setUrlParams(H,p({},u(B,a.params||{}),E),a.url,B,s),!s||""===y||z&&!A?s&&""!==y&&z&&(H.url+=y):H.url+="?"+y,t.ignoreLoadingBar&&(H.ignoreLoadingBar=!0);var K=d(H).then(function(c){var d=c.data,h=G.$promise;if(d&&b.isNumber(d["@odata.count"])&&(d.count=d["@odata.count"]),d&&b.isString(d["@odata.context"])&&d.value&&b.isArray(d.value)){var i=d;d=d.value;for(var j in i)"value"!==j&&(G[j]=i[j])}if(d){if(b.isArray(d)!==(!z&&!!a.isArray)&&!A)throw g("badcfg","Error in resource configuration for action `{0}`. Expected response to contain an {1} but got an {2} (Request: {3} {4})",e,!z&&a.isArray?"array":"object",b.isArray(d)?"array":"object",H.method,H.url);if(b.isArray(d)&&A){if(!(d.length>0))throw"The response returned no result";d=d[0]}!z&&a.isArray&&isNaN(parseInt(d))?(G.length=0,o(d,function(a){"object"==typeof a?G.push(new w(a)):G.push(a)})):(f(d,G),G.$promise=h)}return b.isNumber(d)&&z?G.result=d:!isNaN(parseInt(d))&&z&&(G.result=parseInt(d)),G.$resolved=!0,c.resource=G,c},function(a){return G.$resolved=!0,(D||n)(a),h.reject(a)});return K=K.then(function(a){var b=I(a);return(C||n)(b,a.headers),b},J),F?K:(G.$promise=K,G.$resolved=!1,G)},w.prototype["$"+e]=function(a,b,c){r(a)&&(c=b,b=a,a={});var d=w[e].call(this,a,this,b,c);return d.$promise||d}});var y=w.odata;return w.odata=function(){var a=function(a,b,c,d,e){return y({},{},b,c,!0,a,d,e)};return new i.Provider(a,t.isodatav4)},w.bind=function(a){return m(j,p({},k,a),s)},w}var n=b.noop,o=b.forEach,p=b.extend,q=b.copy,r=b.isFunction;return l.prototype={setUrlParams:function(a,c,d,e,f){var h,i,k=this,l=d||k.template;if(l===k.template&&("PUT"===a.method||"DELETE"===a.method||"GET"==a.method&&!f||"PATCH"==a.method)&&b.isString(k.defaults.odatakey)){k.defaults.stripTrailingSlashes&&(l=l.replace(/\/+$/,"")||"/");var m=k.defaults.odatakey.split(","),n=m.map(function(a){return m.length>1?a+"=:"+a:":"+a});l=l+"("+n.join(",")+")",e&&o(m,function(a){c[a]=e[a]})}var p=k.urlParams={};o(l.split(/\W/),function(a){if("hasOwnProperty"===a)throw g("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(a)&&a&&new RegExp("(^|[^\\\\]):"+a+"(\\W|$)").test(l)&&(p[a]=!0)}),l=l.replace(/\\:/g,":"),c=c||{},o(k.urlParams,function(a,d){h=c.hasOwnProperty(d)?c[d]:k.defaults[d],b.isDefined(h)&&null!==h?(i=j(h),l=l.replace(new RegExp(":"+d+"(\\W|$)","g"),function(a,b){return i+b})):l=l.replace(new RegExp("(/?):"+d+"(\\W|$)","g"),function(a,b,c){return"/"==c.charAt(0)?c:b+c})}),k.defaults.stripTrailingSlashes&&(l=l.replace(/\/+$/,"")||"/"),l=l.replace(/\/\.(?=\w+($|\?))/,"."),a.url=l.replace(/\/\\\./,"/."),o(c,function(b,c){k.urlParams[c]||(a.params=a.params||{},a.params[c]=b)})}},m}]})}(window,window.angular),angular.module("ODataResources").factory("$odata",["$odataBinaryOperation","$odataProvider","$odataValue","$odataProperty","$odataMethodCall","$odataPredicate","$odataOrderByStatement","$odataExpandPredicate",function(a,b,c,d,e,f,g,h){return{Provider:b,BinaryOperation:a,Value:c,Property:d,Func:e,Predicate:f,OrderBy:g,ExpandPredicate:h}}]);